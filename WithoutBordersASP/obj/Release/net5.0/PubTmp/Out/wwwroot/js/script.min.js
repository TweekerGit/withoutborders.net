var width=150,height=400,speed=-.01,start=Date.now(),sphere={type:"Sphere"},projection=d3.geo.orthographic().scale(width/2.1).translate([width/2,height/2]).precision(.5),graticule=d3.geo.graticule(),canvas=d3.select(".earth").attr("width",width).attr("height",height),context=canvas.node().getContext("2d"),path=d3.geo.path().projection(projection).context(context);d3.json("https://s3-us-west-2.amazonaws.com/s.cdpn.io/95802/world-110m.json",(function(t,e){if(t)throw t;var o=topojson.feature(e,e.objects.land),n=graticule();d3.timer((function(){context.clearRect(0,0,width,height),projection.rotate([speed*(Date.now()-start),-15]).clipAngle(90),context.beginPath(),path(sphere),context.lineWidth=0,context.strokeStyle="transparent",context.stroke(),context.fillStyle="transparent",context.fill(),projection.clipAngle(180),context.beginPath(),path(o),context.fillStyle="#808080",context.fill(),context.beginPath(),path(n),context.lineWidth=.5,context.strokeStyle="rgba(119,119,119,0)",context.stroke(),projection.clipAngle(90),context.beginPath(),path(o),context.fillStyle="#000000",context.fill(),context.lineWidth=0,context.strokeStyle="transparent",context.stroke()}))})),d3.select(self.frameElement).style("height",height+"px");